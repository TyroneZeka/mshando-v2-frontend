#!/bin/sh
# Pre-commit hook for React/TypeScript frontend

echo "ğŸ” Running pre-commit checks..."

# Basic file checks
echo "ğŸ“ Checking staged files..."
staged_files=$(git diff --cached --name-only)

if echo "$staged_files" | grep -q '\.tsx\?$'; then
    echo "âœ… TypeScript/React files detected in commit"
fi

if echo "$staged_files" | grep -q '\.md$'; then
    echo "âœ… Documentation files detected in commit"
fi

if echo "$staged_files" | grep -q '\.json$'; then
    echo "âœ… Configuration files detected in commit"
fi

if echo "$staged_files" | grep -q '\.css$'; then
    echo "âœ… Styling files detected in commit"
fi

echo "ğŸ“Š Total files to commit: $(echo "$staged_files" | wc -l)"

# Check for common issues
echo "ğŸ” Checking for common issues..."

# Check for console.log (excluding specific debugging)
if echo "$staged_files" | xargs grep -l "console\.log" 2>/dev/null | grep -v "debug\|logging"; then
    echo "âš ï¸  Warning: console.log statements found (consider using proper logging)"
fi

# Check for TODO comments
if echo "$staged_files" | xargs grep -l "TODO\|FIXME" 2>/dev/null; then
    echo "â„¹ï¸  Info: TODO/FIXME comments found"
fi

echo "âœ… Pre-commit checks completed!"
echo "ğŸš€ Ready to commit!"
